# 原始数据

- imu.csv # 原始IMU数据，包含 gyr,acc,ahrs,mag
  - imu Body Frame

<!-- - cam.csv # 相机数据（可选），包含 Sensor姿态，Camera姿态
  - cam Global Frame / cam Body Frame -->

- \*\*\*.db # 真值数据
  - rtab Global Frame（Y-up） / rtab Body Frame

目标: imu Body Frame 在 Z-UP Global Frame 下的位姿。实际imu数据保持不动，我们是对真值变换，得到位姿

# 坐标系对称理解

世界坐标系 / 载体坐标系

- rtab Body Frame -> imu Body Frame 变换 （已知calobration）
- rtab Global Frame -> imu Global Frame （不重要）

坐标系变换路径

- imu.csv (imu/cam Body Frame)
- imu Body Frame -(1)> rtab Body Frame -(2)> rtab Global Frame -(3)> Z-UP Global Frame
  - (1) 标定结果，或者先验值
  - (2) rtab的采集值
  - (3) 已知，见下

## （3）实际采集过程中的问题

- rtab Global Frame 是 Y-UP 的坐标系，实际我们需要的是 Z-UP 的 Global Frame
  - 如何变换？imu_global_y_up 如何得到 imu_global_z_up?
  - rotvec = [90, 0, 0]
  - imu_global_z_up = rotvec \* imu_global_y_up

rtab Z-up Global Frame <(T1)- rtab Global Frame <-(T_rtab_i)-> rtab Body Frame -(T2)> imu Body Frame

T*imu_i(gt) = T1 * T_rtab_i \* T2

#

Global Frame / Body Frame
(G 系) / (B 系)

目标系 N 系， IMU系 I系

目标； 把 I系的某点 p_I 变换到 N 系

已知 T_GB，T_BI，T_NG

p_N = T_NG * T_GB * T_BI * p_I

T_NG * T_GB * T_BI = T_NI(目标真值)



# \*\*\*.db真值数据文件转换成gt.csv文件
- 1.先将RTAB数据库(.db)文件转换为CSV格式，与IMU数据进行时间同步，并且会有Timediff.png（图文字是英文）显示时间对齐的效果，打印输出要中文
- 2.gt.csv坐标系转换：y-up → z-up，并且会有Ttansfom.png显示坐标系转换的效果，可以比较前后的三轴加速度的，通过这个我可以看到重力加速度是否从y-up转到z-up上
# 这一步是为了把大的db文件压缩小一些，并且完成时间同步，和坐标系对称理解，坐标系变换路径（3）

# 坐标系对称理解，坐标系变换路径（2）
rtab Body Frame -(2)> rtab Global Frame这一步是已知的，可以得到转化