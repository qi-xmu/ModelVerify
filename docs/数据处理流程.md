# 原始数据

- imu.csv # 原始IMU数据，包含 gyr,acc,ahrs,mag
  - imu Body Frame

- cam.csv # 相机数据（可选），包含 Sensor姿态，Camera姿态
  - cam Global Frame / cam Body Frame

- \*\*\*.db # 真值数据
  - rtab Global Frame（Y-up） / rtab Body Frame

目标: imu Body Frame 在 Z-UP Global Frame 下的位姿。

# 坐标系对称

世界坐标系 / 载体坐标系

- rtab Body Frame -> cam Body Frame 变换 （已知）

rtab Global Frame -> cam Global Frame （不重要）

坐标系变换路径

- imu.csv (imu/cam Body Frame)
- imu Body Frame -(1)> rtab Body Frame -(2)> rtab Global Frame -(3)> Z-UP Global Frame
  - (1) 标定结果，或者先验值
  - (2) rtab的采集值

## 实际采集过程中的问题

- rtab Global Frame 是 Y-UP 的坐标系，实际我们需要的是 Z-UP 的 Global Frame
  - 如何变换？imu_global_y_up 如何得到 imu_global_z_up?
  - rotvec = [90, 0, 0]
  - imu_global_z_up = rotvec \* imu_global_y_up

rtab Z-up Global Frame <(T1)- rtab Global Frame <-(T_rtab_i)-> rtab Body Frame -(T2)> imu Body Frame

T*imu_i(gt) = T1 * T_rtab_i \* T2

#

Global Frame / Body Frame
(G 系) / (B 系)

目标系 N 系， IMU系 I系

目标； 把 I系的某点 p_I 变换到 N 系

已知 T_GB，T_BI，T_NG

p_N = T_NG * T_GB * T_BI * p_I

T_NG * T_GB * T_BI = T_NI(目标真值)
